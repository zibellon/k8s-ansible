# Что еще не готово

## Обновление
1. Обновление версии Ubuntu (apt dist upgrade ...)
2. Обновление пакетов на серверах (apt update ...)
3. Обновление компонентов, которые ставились через GIT (containerd, runc, cni)
4. Обновление kubelet, kubectl, kubeadm

## Сетевые политики - проверить + дописать
1. Для всех компонентов нужны сетевые политики, по правило WhiteList. они есть. Их надо проверить
2. Для компонента medik8s - надо написать сетевые политики

## Управление секретами
1. Добавить infisical = установка + настройка + сетевые политики
2. Добавить external-secrets (operator) = установка + настройка + сетевые политики

## Cilium
1. Расписать про работу сетевых политик
2. HOST + NO_HOST
3. какие комбинации
4. Какие ограничения и какая логика

## Дополнить документацию
1. Сменить namespace можно где угодно, кроме olm | longhorn | argocd. Так указано в официальной документации
2. Расписать (проверить и дописать) хронологию восстановления после сбоя. ПО таймингам, что там происходит и в какой момент времени
3. Добавить установку olm-v1. Сейчас установка есть только для olm-v0, а проект перешел на новую версию, полность. НО - medik8s не готов к использованию olm-v1
4. medik8s. проверить и дополнить установку + конфигурацию. Расписать про модуль ядра, который находится в blacklist у системных конфигураций, и который надо включать НЕ ЧЕРЕЗ указание файла, а через unit-service, который будет делать modeprobe (при старте системы)
5. Сделать отдельный playbook - для проверки состояния кластера. Все статистики по всему что есть. Как-то так, чтобы можно было его запустить и получить сводку по всем серверам и всем контейнерам и всем компонентам. Что там вообще происходит, все ли работает и так далее
6. gitlab
   1. Протестировать установку + настрйока + создание нужного репозитория для git-ops
   2. вспомнить, какие вообще ADMIN настройки надо делать, чтобы оно работало исправно (там что-то в admin-area надо настроить). Например запрет на регистрацию
7. argocd
   1. Подумать и расписать про настройки argocd через hosts.yaml (что там вообще можно указать ?)
   2. протестировать запуск и настройку
   3. сделать отдельную переменную для установки git-ops.ya
8. Добавить контроль по: убирать taint с control-plane или нет. Типо - хотим запускать что-то на голове или нет. Учесть этот момент в longhorn. Мб на manager будет большой диск, и ему грех простаивать ? Подумать про эту механику. Если там будет taint - то как будут работать остальные компоненты ?
9. Longhorn. Записать инструкцию по обновлению. Что там есть error, и что в любом случае надо останавливать workload, чтобы сделать detach volume (Без этого, новый engine не заработает)
10. kubelet. Настроить очистку старых контейнеров. Которые unused. Там есть несколько параметров, которые за это отвечают.Нужно их сконфигурировать через kubeadm (В момент установки)