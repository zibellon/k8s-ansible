# =============================================================================
# Wait for rollout to complete
# =============================================================================
# Params:
#   - label_name: Label for task names (used in logs)
#   - rollout_namespace: Namespace
#   - rollout_timeout: Timeout for rollout status
#   - rollout_resources: List of resources (e.g. deployment/name, daemonset/name, statefulset/name)
# =============================================================================

- name: "[{{ label_name }}] Wait for rollouts to complete"
  command: kubectl rollout status {{ item }} -n {{ rollout_namespace }} --timeout={{ rollout_timeout }}
  loop: "{{ rollout_resources }}"
