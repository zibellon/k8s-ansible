# =============================================================================
# Add Helm repository and update
# =============================================================================
# Params:
#   - label_name: Label prefix for task names
#   - helm_repo_name: Repository alias (e.g. "cilium", "longhorn")
#   - helm_repo_url: Repository URL
# =============================================================================

- name: "[{{ label_name }}] Add Helm repository"
  command: helm repo add {{ helm_repo_name }} {{ helm_repo_url }} --force-update
  delegate_to: "{{ master_manager_fact }}"
  run_once: true

- name: "[{{ label_name }}] Update Helm repositories"
  command: helm repo update
  delegate_to: "{{ master_manager_fact }}"
  run_once: true
