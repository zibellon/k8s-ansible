# # =============================================================================
# # GITLAB V2 - EXAMPLE VARIABLES FOR hosts.yaml
# # =============================================================================
# # Add these variables to your hosts.yaml file under all.vars section
# # =============================================================================

#     # ------
#     # GitLab V2 (Production Helm)
#     # ------
#     gitlab_v2_namespace: "ns-gitlab"
#     gitlab_v2_base_domain: "domain.com"
#     gitlab_v2_domain: "gitlab-k8s-v2.domain.com"
#     gitlab_v2_registry_domain: "gitlab-registry-k8s-v2.domain.com"
#     gitlab_v2_pages_domain: "gitlab-pages-k8s-v2.domain.com"
#     gitlab_v2_ssh_port_external: 3714

#     # PostgreSQL
#     gitlab_v2_postgresql_image: "postgres:16-alpine"
#     gitlab_v2_postgresql_storage_class: "lh-major-multi-best-effort"
#     gitlab_v2_postgresql_storage_size: "20Gi"
#     gitlab_v2_postgresql_secret_name: "secret-gitlab-postgresql"
#     gitlab_v2_postgresql_memory_request: "2Gi"
#     gitlab_v2_postgresql_cpu_request: "500m"
#     gitlab_v2_postgresql_memory_limit: "4Gi"

#     # Redis
#     gitlab_v2_redis_image: "redis/redis-stack-server:latest"
#     gitlab_v2_redis_secret_name: "secret-gitlab-redis"
#     gitlab_v2_redis_memory_request: "256Mi"
#     gitlab_v2_redis_cpu_request: "100m"
#     gitlab_v2_redis_memory_limit: "1Gi"

#     # MinIO
#     gitlab_v2_minio_image: "minio/minio:latest"
#     gitlab_v2_minio_root_user: "admin"
#     gitlab_v2_minio_storage_class: "lh-major-single-best-effort"
#     gitlab_v2_minio_storage_size: "50Gi"
#     gitlab_v2_minio_root_secret_name: "secret-gitlab-minio-root"
#     gitlab_v2_minio_registry_secret_name: "secret-gitlab-minio-registry"
#     gitlab_v2_minio_storage_secret_name: "secret-gitlab-minio-storage"
#     gitlab_v2_minio_runner_cache_secret_name: "secret-gitlab-minio-runner-cache"
#     gitlab_v2_minio_connection_secret_name: "secret-gitlab-minio-connection"
#     gitlab_v2_minio_memory_request: "512Mi"
#     gitlab_v2_minio_cpu_request: "250m"
#     gitlab_v2_minio_memory_limit: "2Gi"

#     # GitLab Webservice
#     gitlab_v2_webservice_memory_request: "2.5Gi"
#     gitlab_v2_webservice_cpu_request: "500m"
#     gitlab_v2_webservice_memory_limit: "4Gi"

#     # GitLab Sidekiq
#     gitlab_v2_sidekiq_memory_request: "1.5Gi"
#     gitlab_v2_sidekiq_cpu_request: "250m"
#     gitlab_v2_sidekiq_memory_limit: "3Gi"

#     # GitLab Gitaly
#     gitlab_v2_gitaly_storage_size: "50Gi"
#     gitlab_v2_gitaly_storage_class: "lh-major-multi-best-effort"

#     # GitLab V2 ESO integration
#     gitlab_v2_eso:
#       sa_name: "eso-gitlab-v2"
#       role_name: "eso-gitlab-v2"
#       secret_store_name: "eso-vault-gitlab-v2"
#       kv_engine_path: "secret"
#       secrets:
#         # PostgreSQL credentials
#         - external_secret_name: "eso-gitlab-postgresql"
#           target_secret_name: "secret-gitlab-postgresql"
#           vault_path: "/ns-gitlab/postgresql/credentials"
#           refresh_interval: "1m"
#         # Redis credentials
#         - external_secret_name: "eso-gitlab-redis"
#           target_secret_name: "secret-gitlab-redis"
#           vault_path: "/ns-gitlab/redis/credentials"
#           refresh_interval: "1m"
#         # MinIO root credentials
#         - external_secret_name: "eso-gitlab-minio-root"
#           target_secret_name: "secret-gitlab-minio-root"
#           vault_path: "/ns-gitlab/minio/root"
#           refresh_interval: "1m"
#         # MinIO registry access keys
#         - external_secret_name: "eso-gitlab-minio-registry"
#           target_secret_name: "secret-gitlab-minio-registry"
#           vault_path: "/ns-gitlab/minio/registry"
#           refresh_interval: "1m"
#         # MinIO gitlab-storage access keys
#         - external_secret_name: "eso-gitlab-minio-storage"
#           target_secret_name: "secret-gitlab-minio-storage"
#           vault_path: "/ns-gitlab/minio/gitlab-storage"
#           refresh_interval: "1m"
#         # MinIO runner-cache access keys
#         - external_secret_name: "eso-gitlab-minio-runner-cache"
#           target_secret_name: "secret-gitlab-minio-runner-cache"
#           vault_path: "/ns-gitlab/minio/runner-cache"
#           refresh_interval: "1m"
#         # GitLab root credentials (populated after install)
#         - external_secret_name: "eso-gitlab-root"
#           target_secret_name: "secret-gitlab-root"
#           vault_path: "/ns-gitlab/gitlab/root"
#           refresh_interval: "1m"

# # =============================================================================
# # VAULT POLICY - Add to vault_policies list
# # =============================================================================
#       - name: eso-gitlab-v2-read
#         paths:
#           - path: secret/data/ns-gitlab/*
#             capabilities: [read, list]
#           - path: secret/metadata/ns-gitlab/*
#             capabilities: [read, list]

# # =============================================================================
# # VAULT ROLE - Add to vault_roles list
# # =============================================================================
#       - name: eso-gitlab-v2
#         bound_service_account_names: [eso-gitlab-v2]
#         bound_service_account_namespaces: [ns-gitlab]
#         policies: [eso-gitlab-v2-read]
#         ttl: 1h
