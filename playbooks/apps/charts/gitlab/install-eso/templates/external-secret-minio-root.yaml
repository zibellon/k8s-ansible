# =============================================================================
# EXTERNAL SECRET FOR GITLAB MINIO ROOT CREDENTIALS
# =============================================================================

apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: gitlab-minio-root-sync
  namespace: {{ .Values.namespace }}
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: SecretStore
    name: {{ .Values.gitlabMinio.secretStoreName }}
  target:
    name: {{ .Values.gitlabMinio.rootSecretName }}
  data:
    - secretKey: root-user
      remoteRef:
        key: {{ .Values.vault.kvMountPath }}/data/gitlab-minio/root
        property: username
    - secretKey: root-password
      remoteRef:
        key: {{ .Values.vault.kvMountPath }}/data/gitlab-minio/root
        property: password
