---
- name: Step 1 - Setup SSH keys
  import_playbook: playbooks/setup-ssh-keys.yaml

- name: Step 2 - Set hostnames
  import_playbook: playbooks/set-hostname.yaml

- name: Step 3 - Prepare servers (swap, sysctl, kernel modules)
  import_playbook: playbooks/server-prepare.yaml

- name: Step 4 - Prepare Longhorn
  import_playbook: playbooks/longhorn-prepare.yaml

- name: Step 5 - Prepare Cilium
  import_playbook: playbooks/cilium-prepare.yaml

- name: Step 6 - Install containerd + kubeadm/kubelet/kubectl
  import_playbook: playbooks/main-components.yaml

- name: Step 7 - Deploy HAProxy API Server LB
  import_playbook: playbooks/haproxy-apiserver-lb.yaml

- name: Step 8 - Install Helm (managers only)
  import_playbook: playbooks/install-helm.yaml

- name: Step 9 - Install k9s (managers only)
  import_playbook: playbooks/install-k9s.yaml
